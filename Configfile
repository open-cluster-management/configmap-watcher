OS ?= $(shell cat /etc/os-release | grep ^ID= | sed -e 's/ID=//' -e 's/\"//g')
ARCH = $(shell uname -m)
ifeq ($(ARCH), x86_64)
    ARCH = amd64
endif

# Git vars
GIT_COMMIT := $(shell git rev-parse --short HEAD)
GIT_REMOTE_URL := $(shell git config --get remote.origin.url)

# Go build vars
GOARCH=$(ARCH)
GOOS := linux

APP=icp-config-map-watcher
VERSION=3.2.2

# Metadata
IMAGE_DESCRIPTION=Service that watches config maps specified by deployments/statefulsets/daemonsets and restarts their pods if the configmap changes.
SUMMARY=Watches for changes in configmaps for pods and restarts pods if they change.

# Image settings
DOCKER_REGISTRY ?= hyc-cloud-private-scratch-docker-local.artifactory.swg-devops.com
DOCKER_NAMESPACE ?= crystal
DOCKER_IMAGE ?= $(APP)-$(ARCH)
DOCKER_BUILD_TAG ?= $(VERSION)-$(GIT_COMMIT)
DOCKER_BUILD_TAG_RHEL ?= $(DOCKER_BUILD_TAG)-rhel
DOCKER_FILE := Dockerfile
DOCKER_BUILD_PATH := $(TRAVIS_BUILD_DIR)
